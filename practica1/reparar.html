<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ElectroInformatic â€” Reparar</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
  <div class="brand">
    <div class="logo">!eÂ¡</div>
    <div>
      <div style="font-weight:800">ElectroInformatic</div>
      <div style="font-size:12px;color:var(--muted)">Dispositivos electrÃ³nicos</div>
    </div>
  </div>

  <div class="header-actions">
    <!-- Carrito siempre visible -->
    <a href="carrito.html" class="nav-btn cart-btn" id="cart-btn">Carrito (0)</a>

    <!-- BotÃ³n hamburguesa -->
    <button class="hamburger-btn" id="hamburger-btn">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

<!-- MenÃº lateral -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>
<aside class="sidebar" id="sidebar">
  <button class="close-sidebar" id="close-sidebar">&times;</button>
  <nav class="sidebar-nav">
    <a href="index.html" class="sidebar-link">Inicio</a>
    <a href="comprar.html" class="sidebar-link">Comprar</a>
    <a href="reparar.html" class="sidebar-link">Reparar</a>
    <a href="mis-compras.html" class="sidebar-link">Mis Compras</a>
    <a href="#" class="sidebar-link" id="login-sidebar-link">Iniciar SesiÃ³n</a>
  </nav>
</aside>

  <main>
    <h2>Reparar</h2>

    <div class="card form-card">
      <form id="repair-form">
        <input id="repair-name" placeholder="Nombre" required>
        <input id="repair-device" placeholder="Dispositivo (ej. mÃ³vil, portÃ¡til)" required>
        <textarea id="repair-desc" placeholder="DescripciÃ³n del fallo" rows="4" required></textarea>
        <div class="form-buttons">
          <button class="btn" type="submit">Enviar solicitud</button>
          <button class="small-btn" type="button" onclick="alert('Demo: llama al 900-XXX-XXX')">Llamar</button>
        </div>
      </form>
    </div>

    <h3 style="margin-top:30px;">Solicitudes enviadas</h3>
    <div id="repair-list" class="card" style="padding:16px;">
      <p class="muted">AÃºn no hay solicitudes.</p>
    </div>

    <footer>âœ¨ La tienda para verdaderos ElectroInformaticos âœ¨</footer>
  </main>
    <!-- Modal de Inicio de SesiÃ³n -->
<div id="login-modal" class="modal">
  <div class="modal-content">
    <span class="close-modal" id="close-login-modal">&times;</span>
    <div id="login-modal-body">
      <h2>Iniciar SesiÃ³n / Registro</h2>
      <form id="login-form">
        <input type="email" id="login-email" placeholder="Correo electrÃ³nico" required>
        <input type="text" id="login-name" placeholder="Nombre completo" required>
        <input type="password" id="login-password" placeholder="ContraseÃ±a" required>
        <div class="form-buttons">
          <button class="btn" type="submit">Registrarse</button>
          <button class="small-btn" type="button" id="login-btn">Iniciar SesiÃ³n</button>
        </div>
      </form>
    </div>
  </div>
</div>

  <script src="script.js"></script>
  <script>
    // --- GestiÃ³n de reparaciones ---
    let repairs = JSON.parse(localStorage.getItem('repairs')) || [];

    const form = document.getElementById('repair-form');
    const list = document.getElementById('repair-list');

    function saveRepairs() {
      localStorage.setItem('repairs', JSON.stringify(repairs));
    }

    function renderRepairs() {
      if (repairs.length === 0) {
        list.innerHTML = '<p class="muted">AÃºn no hay solicitudes.</p>';
        return;
      }

      list.innerHTML = repairs.map((r, index) => `
        <div style="border-bottom:1px solid rgba(255,255,255,0.1); padding:10px 0;">
          <strong>${r.name}</strong> â€” <em>${r.device}</em><br>
          <div class="muted" style="margin:4px 0;">"${r.desc}"</div>
          <small class="muted">ðŸ•’ ${r.date}</small>
        </div>
      `).join('');
    }

    // Mostrar solicitudes al cargar la pÃ¡gina
    document.addEventListener('DOMContentLoaded', renderRepairs);

    // Enviar formulario
    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const name = document.getElementById('repair-name').value.trim();
      const device = document.getElementById('repair-device').value.trim();
      const desc = document.getElementById('repair-desc').value.trim();

      if (!name || !device || !desc) {
        alert('Por favor completa todos los campos.');
        return;
      }

      const repair = {
        name,
        device,
        desc,
        date: new Date().toLocaleString('es-ES')
      };

      // Guardar
      repairs.push(repair);
      saveRepairs();
      renderRepairs();

      // Limpiar formulario
      form.reset();

      alert('âœ… Solicitud enviada correctamente');
    });
  </script>
</body>
</html>
